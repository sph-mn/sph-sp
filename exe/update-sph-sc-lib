#!/bin/sh

sph_sc_root="$1"
destination="$PWD/src/c/foreign/sph-sp/sph"

if test -d "$destination"
then
  rm "$destination"/*
else
  mkdir -p "$destination"
fi

cd "$sph_sc_root/src/c-precompiled/sph"

cp status.h spline-path.h spline-path.c quicksort.h queue.h \
  thread-pool.h thread-pool.c futures.h futures.c float.h float.c \
  random.h random.c memreg.h memory.h memory.c array.h list.h "$destination"

# only for testing
cp test.h string.h filesystem.h "$destination"

# replace include paths in copied files
sed -i 's@#include <sph/@#include <sph-sp/sph/@g' "$destination"/*
